\documentclass[journal,onecolumn]{IEEEtran}
\usepackage{amsmath,amssymb}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{float}
\usepackage{hyperref}
\usepackage{xepersian}
\settextfont{Times New Roman}
\setlatintextfont{Times New Roman}
\hypersetup{hidelinks}
\IfFileExists{../solutions/latex_metrics.tex}{\input{../solutions/latex_metrics.tex}}{}

% مقادیر پیش‌فرض (در صورت نبود خروجی خودکار)
\providecommand{\MetricRuntimeProfile}{N/A}
\providecommand{\MetricQSixModel}{N/A}
\providecommand{\MetricQSixAccuracy}{N/A}
\providecommand{\MetricQSixAuc}{N/A}
\providecommand{\MetricQSixFOne}{N/A}
\providecommand{\MetricQFifteenBrier}{N/A}
\providecommand{\MetricQFifteenEce}{N/A}
\providecommand{\MetricQFifteenBestFOneThreshold}{N/A}
\providecommand{\MetricQSixteenTopFeature}{N/A}
\providecommand{\MetricQSixteenTopPsi}{N/A}
\providecommand{\MetricQSeventeenRecourseRate}{N/A}
\providecommand{\MetricQEighteenMeanAuc}{N/A}
\providecommand{\MetricQEighteenAucDecay}{N/A}
\providecommand{\MetricQNineteenCovNinety}{N/A}
\providecommand{\MetricQNineteenMaxUndercoverage}{N/A}
\providecommand{\MetricQTwentyDpGapBase}{N/A}
\providecommand{\MetricQTwentyDpGapMitigated}{N/A}
\providecommand{\MetricQTwentyPolicyPass}{N/A}
\newcommand{\FASection}[1]{\par\bigskip\noindent\textbf{#1}\par\medskip}
\newcommand{\FASubsection}[1]{\par\medskip\noindent\textbf{#1}\par\smallskip}

\begin{document}
\begin{center}
{\Large \textbf{گزارش نهایی کامل پروژه در قالب IEEE}}\\[0.4em]
{\large \textbf{تحلیل داده‌محور مهاجرت جهانی استعدادهای فنی}}\\[0.8em]
تیم دستیاران آموزشی درس علم داده\\
دانشکده مهندسی برق و کامپیوتر، دانشگاه تهران\\
بسته کپستون کارشناسی‌ارشد -- بهار ۱۴۰۴
\end{center}
\vspace{0.8em}

\FASection{چکیده}
این گزارش نسخه کامل و قابل داوری پروژه نهایی درس علم داده است. پیاده‌سازی حاضر کل مسیر مهندسی داده تا تحلیل‌های تولیدی را پوشش می‌دهد: کنترل نشت، مدل‌سازی خطی و غیرخطی، بهینه‌سازی، یادگیری بدون نظارت، تبیین‌پذیری با \lr{SHAP}، و سه افزونه پیشرفته \lr{Q18-Q20} برای پایداری زمانی، عدم‌قطعیت و عدالت الگوریتمی.

\FASection{تعریف مسئله و دامنه پروژه}
هدف، پیش‌بینی \lr{Migration\_Status} برای ۵۰ هزار متخصص فناوری است. خروجی نهایی صرفا یک مدل نیست؛ بلکه یک بسته کامل دانشگاهی-مهندسی است که شامل کد، آزمون، نوت‌بوک، گزارش دو‌زبانه و خروجی‌های استاندارد \lr{CSV/JSON/PNG} است.

\FASection{تشخیص اولیه داده}

\FASubsection{توازن کلاس هدف}
\begin{figure}[H]
\centering
\includegraphics[width=0.88\linewidth]{../figures/report_target_balance.png}
\caption{توزیع کلاس‌های متغیر هدف \lr{Migration\_Status}.}
\end{figure}
\textbf{تفسیر:} توزیع کلاس‌ها نامتوازنِ خفیف است و ارزیابی باید فراتر از دقت خام باشد. \\
\textbf{اثر تصمیمی:} معیارهای \lr{AUC/F1} و تحلیل آستانه، معیار اصلی انتخاب مدل قرار می‌گیرند. \\
\textbf{محدودیت/تهدید:} نسبت کلاس‌ها ممکن است در زمان استقرار تغییر کند و ثابت فرض‌کردن آن پرریسک است.

\FASubsection{الگوی داده‌های گمشده}
\begin{figure}[H]
\centering
\includegraphics[width=0.90\linewidth]{../figures/report_missingness_top10.png}
\caption{ده ستون با بیشترین نرخ داده گمشده.}
\end{figure}
\textbf{تفسیر:} گمشدگی در ستون‌های فرایندی متمرکز است و بخشی از آن با نشت داده همپوشانی دارد. \\
\textbf{اثر تصمیمی:} ویژگی‌های پس‌رخداد، قبل از آموزش حذف می‌شوند یا به‌صورت کنترل‌شده وارد تحلیل می‌شوند. \\
\textbf{محدودیت/تهدید:} اگر گمشدگی تصادفی نباشد، خودِ الگوی گمشدگی می‌تواند منشأ بایاس شود.

\FASubsection{ساختار هم‌بستگی}
\begin{figure}[H]
\centering
\includegraphics[width=0.90\linewidth]{../figures/report_numeric_correlation.png}
\caption{نقشه هم‌بستگی ویژگی‌های عددی کلیدی با هدف.}
\end{figure}
\textbf{تفسیر:} چند ویژگی مهم سیگنال دارند اما هیچ متغیری به‌تنهایی پاسخ کامل نمی‌دهد. \\
\textbf{اثر تصمیمی:} استفاده از مدل‌های چندمتغیره و غیرخطی به‌صورت هم‌زمان توجیه می‌شود. \\
\textbf{محدودیت/تهدید:} هم‌بستگی دلالت علّی ندارد و می‌تواند بازتاب عوامل پنهان سیاستی باشد.

\FASubsection{نرخ مهاجرت در سطح کشور}
\begin{figure}[H]
\centering
\includegraphics[width=0.90\linewidth]{../figures/report_country_migration_rate.png}
\caption{مقایسه نرخ مهاجرت بین کشورها پس از اعمال حداقل حجم نمونه.}
\end{figure}
\textbf{تفسیر:} تفاوت گروهی بین کشورها معنادار است و بی‌توجهی به آن ارزیابی را ناقص می‌کند. \\
\textbf{اثر تصمیمی:} تحلیل عدالت قبل و بعد از مداخله الزامی است. \\
\textbf{محدودیت/تهدید:} تفاوت‌ها می‌توانند ناشی از محدودیت‌های سیاستی باشند نه توان واقعی افراد.

\FASection{نتایج هسته اصلی (Q1 تا Q6)}

\FASubsection{Q1: مهندسی داده و نشت}
خروجی \lr{SQL} در \lr{code/solutions/q1\_moving\_average.sql} ذخیره شده است.\
ویژگی \lr{Visa\_Approval\_Date} به‌عنوان نشت مستقیم حذف می‌شود.

\FASubsection{Q3: تحلیل بهینه‌سازها}
\begin{figure}[H]
\centering
\includegraphics[width=0.88\linewidth]{../figures/q3_ravine_optimizers.png}
\caption{مسیر همگرایی \lr{SGD}، \lr{Momentum} و \lr{Adam} روی سطح دره‌ای.}
\end{figure}
\textbf{تفسیر:} \lr{Momentum/Adam} نوسان عرضی را کاهش می‌دهند و همگرایی سریع‌تری دارند. \\
\textbf{اثر تصمیمی:} برای توابع بدشرط، بهینه‌ساز شتاب‌دار انتخاب پیش‌فرض مناسب‌تری است. \\
\textbf{محدودیت/تهدید:} رفتار روی تابع آزمایشی، کل پیچیدگی اهداف غیرمحدب را پوشش نمی‌دهد.

\FASubsection{Q4: مدل غیرخطی و کنترل پیچیدگی}
\begin{figure}[H]
\centering
\includegraphics[width=0.86\linewidth]{../figures/q4_svm_gamma_sweep.png}
\caption{حساسیت دقت اعتبارسنجی نسبت به \(\gamma\) در \lr{SVM-RBF}.}
\end{figure}
\textbf{تفسیر:} افزایش \(\gamma\) می‌تواند مرز تصمیم را بیش‌ازحد محلی و پرنوسان کند. \\
\textbf{اثر تصمیمی:} در حالت بیش‌برازش، \(\gamma\) کاهش می‌یابد و روی اعتبارسنجی تنظیم می‌شود. \\
\textbf{محدودیت/تهدید:} نتیجه نهایی به مقیاس‌بندی و همپوشانی کلاس‌ها وابسته است.

\begin{figure}[H]
\centering
\includegraphics[width=0.86\linewidth]{../figures/q4_tree_pruning_curve.png}
\caption{مصالحه خطا-پیچیدگی در هرس \lr{Decision Tree}.}
\end{figure}
\textbf{تفسیر:} \(\alpha\) بزرگ‌تر اندازه درخت را کم می‌کند و واریانس را پایین می‌آورد. \\
\textbf{اثر تصمیمی:} انتخاب \(\alpha\) بر اساس عملکرد اعتبارسنجی انجام می‌شود، نه خطای آموزش. \\
\textbf{محدودیت/تهدید:} منحنی هرس نسبت به نحوه تقسیم داده حساس است.

\FASubsection{Q5: ساختار بدون نظارت}
\begin{figure}[H]
\centering
\includegraphics[width=0.82\linewidth]{../figures/q5_kmeans_elbow.png}
\caption{منحنی آرنج \lr{WCSS} برای انتخاب تعداد خوشه‌ها.}
\end{figure}
\textbf{تفسیر:} پس از یک \(K\) میانی، کاهش \lr{WCSS} بازده نزولی پیدا می‌کند. \\
\textbf{اثر تصمیمی:} \(K\) به‌صورت heuristic انتخاب و سپس با تفسیرپذیری خوشه‌ها اعتبارسنجی می‌شود. \\
\textbf{محدودیت/تهدید:} در منحنی‌های کم‌انحنا، محل آرنج می‌تواند مبهم باشد.

\FASubsection{Q6: مدل کپستون و \lr{SHAP}}
پروفایل اجرا: \textbf{\MetricRuntimeProfile}.\\
مدل کپستون: \textbf{\MetricQSixModel}.\\
\lr{AUC}: \textbf{\MetricQSixAuc}، \lr{Accuracy}: \textbf{\MetricQSixAccuracy}، \lr{F1}: \textbf{\MetricQSixFOne}.

\begin{figure}[H]
\centering
\includegraphics[width=0.95\linewidth]{../figures/q6_shap_force_plot.png}
\caption{توضیح محلی \lr{SHAP} برای نمونه منتخب.}
\end{figure}
\textbf{تفسیر:} اختلاف \lr{base value} و خروجی نهایی از جمع سهم ویژگی‌ها ساخته می‌شود. \\
\textbf{اثر تصمیمی:} بازبینی پرونده روی عوامل غالب منفی/مثبت متمرکز می‌شود. \\
\textbf{محدودیت/تهدید:} \lr{SHAP} رفتار مدل را توضیح می‌دهد، نه رابطه علّی دنیای واقعی را.

\begin{figure}[H]
\centering
\includegraphics[width=0.88\linewidth]{../figures/q6_shap_summary.png}
\caption{نمای سراسری اهمیت ویژگی‌ها در مدل کپستون.}
\end{figure}
\textbf{تفسیر:} ویژگی‌های مرتبط با فعالیت فنی و استناد، وزن بیشتری در پیش‌بینی دارند. \\
\textbf{اثر تصمیمی:} کنترل کیفیت داده برای ویژگی‌های پراثر، اولویت حاکمیتی می‌گیرد. \\
\textbf{محدودیت/تهدید:} اهمیت سراسری، ناهمگنی اثر در همه زیرگروه‌ها را نشان نمی‌دهد.

\FASection{بلوک پیشرفته تولیدی (Q15 تا Q20)}

\FASubsection{Q15: کالیبراسیون و سیاست آستانه}
\lr{Brier}: \textbf{\MetricQFifteenBrier}، \lr{ECE}: \textbf{\MetricQFifteenEce}، آستانه بهینه \lr{F1}: \textbf{\MetricQFifteenBestFOneThreshold}.

\begin{figure}[H]
\centering
\includegraphics[width=0.86\linewidth]{../figures/q15_calibration_curve.png}
\caption{منحنی قابلیت اطمینان کالیبراسیون احتمال.}
\end{figure}
\textbf{تفسیر:} کالیبراسیون نشان می‌دهد احتمال پیش‌بینی‌شده تا چه حد با فراوانی واقعی هم‌راستاست. \\
\textbf{اثر تصمیمی:} تصمیم‌های حساس با احتمال کالیبره‌شده گرفته می‌شوند، نه امتیاز خام. \\
\textbf{محدودیت/تهدید:} کالیبراسیون در گذر زمان ممکن است فرسوده شود.

\begin{figure}[H]
\centering
\includegraphics[width=0.90\linewidth]{../figures/q15_threshold_tradeoff.png}
\caption{مصالحه آستانه بین دقت، بازخوانی، \lr{F1} و هزینه مورد انتظار.}
\end{figure}
\textbf{تفسیر:} هر آستانه، توازن متفاوتی بین خطاهای نوع اول/دوم ایجاد می‌کند. \\
\textbf{اثر تصمیمی:} آستانه نهایی با ماتریس هزینه سیاستی انتخاب می‌شود. \\
\textbf{محدودیت/تهدید:} مفروضات هزینه ممکن است بین کشور/سازمان متفاوت باشد.

\FASubsection{Q16: پایش درفت}
ویژگی با بیشترین درفت: \textbf{\MetricQSixteenTopFeature} با \lr{PSI}=\textbf{\MetricQSixteenTopPsi}.

\begin{figure}[H]
\centering
\includegraphics[width=0.90\linewidth]{../figures/q16_drift_psi_top12.png}
\caption{رتبه‌بندی درفت ویژگی‌ها بر اساس \lr{PSI}.}
\end{figure}
\textbf{تفسیر:} بخشی از ویژگی‌ها ناپایداری توزیعی قابل‌توجه دارند. \\
\textbf{اثر تصمیمی:} آستانه‌های هشدار \lr{PSI} به پایش دوره‌ای و بازآموزی متصل می‌شود. \\
\textbf{محدودیت/تهدید:} \lr{PSI} تغییر رابطه ویژگی-هدف را مستقیما اندازه نمی‌گیرد.

\FASubsection{Q17: ریکورس مقابله‌ای}
نرخ موفقیت ریکورس: \textbf{\MetricQSeventeenRecourseRate}.

\begin{figure}[H]
\centering
\includegraphics[width=0.78\linewidth]{../figures/q17_recourse_median_deltas.png}
\caption{میانه تغییر لازم برای عبور از مرز تصمیم در هر ویژگی قابل اقدام.}
\end{figure}
\textbf{تفسیر:} هزینه تغییر در ویژگی‌های عملیاتی یکسان نیست و قابل کمی‌سازی است. \\
\textbf{اثر تصمیمی:} پیشنهاد اقدام به متقاضی بر اساس کم‌هزینه‌ترین مسیر ممکن داده می‌شود. \\
\textbf{محدودیت/تهدید:} عملی‌بودن ریکورس به محدودیت‌های واقعی خارج از داده وابسته است.

\FASubsection{Q18: اعتبارسنجی زمانی و افت عملکرد}
میانگین \lr{AUC} زمانی: \textbf{\MetricQEighteenMeanAuc}، افت \lr{AUC}: \textbf{\MetricQEighteenAucDecay}.

\begin{figure}[H]
\centering
\includegraphics[width=0.90\linewidth]{../figures/q18_temporal_degradation.png}
\caption{افت عملکرد در پنجره‌های زمانی غلطان در کنار شاخص درفت.}
\end{figure}
\textbf{تفسیر:} عملکرد بین foldهای متوالی تغییر می‌کند و با شدت درفت قابل مقایسه است. \\
\textbf{اثر تصمیمی:} قبل از استقرار، سنجش زمانی اجباری است و صرف \lr{random split} کافی نیست. \\
\textbf{محدودیت/تهدید:} در نبود ستون زمانی معتبر، fallback باید صریح گزارش شود.

\FASubsection{Q19: کمی‌سازی عدم‌قطعیت}
\lr{Coverage@90}: \textbf{\MetricQNineteenCovNinety}، بیشینه کم‌پوششی: \textbf{\MetricQNineteenMaxUndercoverage}.

\begin{figure}[H]
\centering
\includegraphics[width=0.90\linewidth]{../figures/q19_coverage_vs_alpha.png}
\caption{پوشش اسمی در برابر پوشش تجربی و پهنای بازه عدم‌قطعیت.}
\end{figure}
\textbf{تفسیر:} بازه‌های conformal توازن بین اطمینان پیش‌بینی و عرض بازه را روشن می‌کنند. \\
\textbf{اثر تصمیمی:} موارد کم‌اطمینان به مسیر بررسی انسانی ارجاع می‌شوند. \\
\textbf{محدودیت/تهدید:} تضمین‌های پوشش در صورت جابه‌جایی توزیع تضعیف می‌شوند.

\FASubsection{Q20: مداخله عدالت الگوریتمی}
شکاف \lr{DP} پایه: \textbf{\MetricQTwentyDpGapBase}، شکاف \lr{DP} پس از مداخله: \textbf{\MetricQTwentyDpGapMitigated}، نتیجه قید سیاستی: \textbf{\MetricQTwentyPolicyPass}.

\begin{figure}[H]
\centering
\includegraphics[width=0.84\linewidth]{../figures/q20_fairness_tradeoff.png}
\caption{مصالحه عدالت-عملکرد از مدل پایه تا مدل مداخله‌شده.}
\end{figure}
\textbf{تفسیر:} بازوزن‌دهی، نقطه عملکردی مدل را روی صفحه عدالت-کارایی جابه‌جا می‌کند. \\
\textbf{اثر تصمیمی:} استقرار منوط به عبور هم‌زمان از قید افت عملکرد و بهبود عدالت است. \\
\textbf{محدودیت/تهدید:} بهبود یک معیار عدالت ممکن است برای زیرگروه‌های ریزتر کافی نباشد.

\FASection{بازتولیدپذیری و خروجی‌ها}
اجرای کامل با دستور زیر انجام می‌شود:\\
\lr{python code/scripts/full\_solution\_pipeline.py --profile \{fast,balanced,heavy\}}\\
خروجی‌ها در \lr{code/solutions} و \lr{code/figures} ذخیره می‌شوند، شامل \lr{run\_summary.json} نسخه ۲، خروجی‌های \lr{Q18-Q20} و فایل‌های \lr{latex\_metrics} برای گزارش خودکار.

\FASection{جمع‌بندی}
پروژه در این نسخه به یک بسته حرفه‌ای کپستون تبدیل شده است: پیچیدگی علمی، استاندارد مهندسی، و قابلیت داوری آموزشی را به‌صورت یکپارچه و قابل بازتولید پوشش می‌دهد.

\end{document}
